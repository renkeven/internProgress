<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5dataprep</title>

    <script src="https://unpkg.com/react@17.0.2/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/d3@7.0.0/dist/d3.min.js"></script>

    <style>
        pre {
            font-size: 7em;
        }
    </style>
</head>
<body>
    <div id="root">
    </div>

    <pre id="message-container"></pre>

    <script>

        const csvUrl = 'https://gist.githubusercontent.com/curran/b236990081a24761f7000567094914e0/raw/cssNamedColors.csv';

        d3.csv(csvUrl).then(data =>{
            let message = '';

            message += Math.round(d3.csvFormat(data).length / 1024) + ' kB\n';
            message += data.length + ' rows\n';
            message += data.columns.length + ' columns\n';
            document.getElementById('message-container').textContent = message;

        });

        // How to fetch async and await data the classic way

        // const fetchText = async (url) => {
        //     const response = await fetch(url);
        //     return text = await response.text();
        // };
        // fetchText(csvUrl).then(text => {
        //     const data = d3.csvParse(text);
        //     let message = '';

        //     message += Math.round(text.length / 1024) + ' kB\n';
        //     message += data.length + ' rows\n';
        //     message += data.columns.length + ' columns\n';
        //     document.getElementById('message-container').textContent = message;

        // });

        // fetch(url).then( response => {
        //     response.text().then(text => {
        //         console.log(text);
        //     })
        // });

    </script>
    <script src="bundle.js"></script>
</body>
</html>